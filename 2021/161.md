# 关于内容中的 @用户 加 话题 的一些想法

## 第一种html形式

直接生成 html 加上链接，这种也分预处理和实时处理

但是这种对多平台应用并不友好，

例如web 端和 app 端就不能统一，必须在应用内部再处理。

这就增加了一些变化。不能统一

例如：

```
@user 这是一个召唤用户 #每天一次#
```
输出的内容为

```html
<a href="/user/1">@user</a>这是一个召唤用户 <a href="/topic/1">#每天一次#</a>
```
### 优点
web 端快速

### 缺点
不能适应多平台应用，增加了其他平台的难度


## 第二种附加属性

参考搜索对关键词的标注

也可以分预处理和实时处理

返回一段原始文本，附加一些标注参数

例如：

```
@user 这是一个召唤用户 #每天一次#
```

输出
```json
{
    "content": "@user 这是一个召唤用户 #每天一次#",
    "rules": [
        {
            "word": "@user",
            "rule": "user",
            "id": 1,
        },
        {
            "word": "#每天一次#",
            "rule": "topic",
            "id": 1,
        },
    ]
}
```
这样由各自应用自行组合，不必进行解析步骤。

### 优点

方便多平台应用使用

### 拓展

1. 可以把这段数据由发布时进行保存传输，而不是服务端进行提取。
2. 加入规则字符串的开始结束位置，能更准确的定位。

### 数据存储思考

1. 直接保存到一张表中。保存到 text 或 json 类型的字段中。
2. 增加一张表，分规则保存。方便关联数据变化进行改动。